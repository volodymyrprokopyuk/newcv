%% language
\mainlanguage[en]

%% FontAwesome symbols
\definefontsynonym[Awesome][name:fontawesome]
\definesymbol[AwOK][\getnamedglyphdirect{Awesome}{ok}]
\define\AwOK{\symbol[AwOK]}

%% SourcePro font
\starttypescript[sans][SourcePro]
\definefontsynonym[Sans][name:sourcesansprolight]
\definefontsynonym[SansBold][name:sourcesansprobold]
\definefontsynonym[SansItalic][name:sourcesansprolightit]
\stoptypescript
\definetypeface[SourcePro][ss][sans][SourcePro]
\setupbodyfont[SourcePro,sans,10pt]

%% layout
\setuplayout[backspace=5pt,edge=0pt,edgedistance=0pt,margin=0pt,
  margindistance=5pt,width=fit,
  topspace=0pt,top=0pt,topdistance=0pt,header=1pt,headerdistance=25pt,
  footer=20pt,footerdistance=5pt,bottom=1pt,bottomdistance=10pt,height=fit]
%\showframe
\setupwhitespace[small]
\setuppagenumbering[location=]
\setupfootertexts[{
  \hfill {{ mobile }}
  \hfill {{ email }}
  \hfill {{ address }}\hfill}]

%% lists
\definesymbol[1][{\AwOK}]

%% interaction
\setupinteraction[state=start]
\useURL[url:context][http://contextgarden.net][][\CONTEXT]

%% Background
\definelayer[Background][state=repeat,x=0pt,y=0pt,width=\paperwidth,
  height=\paperheight]
\setupbackgrounds[page][background={color,Background},
  backgroundcolor=lightgray]

%% Section
\defineparagraphs[Section][n=2,distance=20pt]
\setupparagraphs[Section][1][width=0.05\textwidth]

%% SubSection
\defineparagraphs[SubSection][n=2,distance=20pt]
\setupparagraphs[SubSection][1][width=0.2\textwidth,align=flushright]

%% Profile
\defineparagraphs[Profile][n=2,distance=10pt]
\setupparagraphs[Profile][1][width=0.4\textwidth]

%% Domains
\defineparagraphs[Domains][n=2,distance=10pt]
\setupparagraphs[Domains][1][width=0.35\textwidth]

%% Frameworks
\defineparagraphs[Frameworks][n=2,distance=10pt]
\setupparagraphs[Frameworks][1][width=0.17\textwidth]

%% Languages
\defineparagraphs[Languages][n=2,distance=20pt]
\setupparagraphs[Languages][1][width=0.3\textwidth]

%\usemodule[fnt-10]
%\ShowCompleteFont{name:fontawesome}{20pt}{1}

\starttext

%% BACKGROUND %%
\setlayer[Background][preset=lefttop]
  {\framed[width=40pt,height=\paperheight,frame=off,
    background=color,backgroundcolor=cyan]{}}
\setlayer[Background][preset=lefttop]
  {\framed[width=\paperwidth,align=left,frame=off,
    background=color,backgroundcolor=blue,
    foreground=color,foregroundcolor=white]
    {\bfxx CURRICULUM VITAE\hspace[medium]}}
\setlayer[Background][preset=leftbottom]
  {\framed[width=\paperwidth,height=10px,frame=off,
    background=color,backgroundcolor=blue]{}}
\setlayer[Background][preset=rightbottom,y=36pt]
  {\rotate[90]{\framed[frame=off]{\tfxx Typeset with \CONTEXT}}}

%% PROFILE %%
\startSection
\AwOK\crlf\Section

\startProfile
{{ firstName }} {{ lastName }}\blank
{{ position }}\Profile
{{ mobile }} {% if home %}{{ home }}{% endif %}\crlf
{{ email }}\crlf
{{ address }}
\stopProfile
\stopSection

%% OBJECTIVE %%
\startSection
\AwOK\crlf\Section

\startSubSection
{\bfc\darkgray Objective}\SubSection
{{ objective }}
\stopSubSection
\stopSection

%% EDUCATION %%
\startSection
\AwOK\crlf\rotate[90]{\bfd\darkgray Education}\Section

\startSubSection
{\bfc\darkgray Education}\SubSection
\stopSubSection
{% for edu in education %}
\startSubSection
{{ edu.from }} -- {{ edu.to }}\SubSection
{{ edu.degree }}\crlf
{{ edu.school.name}}, {{ edu.school.location }}\crlf
{{ edu.subject }}\crlf
{{ edu.description }}
\stopSubSection
{% endfor -%}
\stopSection

%% EMPLOYMENT %%
\startSection
\AwOK\crlf\rotate[90]{\bfd\darkgray Employment}\Section

\startSubSection
{\bfc\darkgray Employment}\SubSection
\stopSubSection
{% for emp in employment %}
\startSubSection
{{ emp.from }} -- {{ emp.to }}\SubSection
{{ emp.position }}\crlf
{{ emp.company.name }}, {{ emp.company.location }}\crlf
{{ emp.department }}
  \startitemize[joinedup,nowhite]
  {% for resp in emp.responsibilities -%}
  \item {{ resp }}
  {% endfor -%}
  \stopitemize
\stopSubSection
{% endfor -%}
\stopSection

%% EXPERIENCE %%
\startSection
\AwOK\crlf\rotate[90]{\bfd\darkgray Experience}\Section

\startSubSection
{\bfc\darkgray Experience}\SubSection
\stopSubSection
{% for exp in experience %}
\startSubSection
{{ exp.domain }}\SubSection
{{ exp.description.before }}
{%- if exp.description.experiences.length %}
  \startitemize[joinedup,nowhite]
  {% for ex in exp.description.experiences -%}
  \item {{ ex }}
  {% endfor -%}
  \stopitemize
{%- endif %}
{{ exp.description.after }}
\stopSubSection
{% endfor -%}
\stopSection

%% PROFICIENCY %%
{% if proficiency -%}
\startSection
\AwOK\crlf\rotate[90]{\bfd\darkgray Technical Proficiency}\Section

\startSubSection
{\bfc\darkgray Technical Proficiency}\SubSection
\stopSubSection
{% for prof in proficiency %}
\startSubSection
{{ prof.domain }}\SubSection
\startDomains
{%- for subdom in prof.subdomains %}
{{ subdom.subdomain }}
\startFrameworks
{%- for framework in subdom.frameworks %}
{{ framework.name }}\crlf
{%- if loop.index0 == loop.length // 2 - 1 %}\Frameworks{% endif -%}
{% endfor %}
\stopFrameworks
{%- if loop.index0 == loop.length // 2 - 1 %}\Domains{% endif -%}
{% endfor %}
\stopDomains
\stopSubSection
{% endfor -%}
\stopSection
{%- endif %}

%% LANGUAGES %%
\startSection
\AwOK\crlf\rotate[90]{\bfd\darkgray Languages}\Section

\startSubSection
{\bfc\darkgray Languages}\SubSection

\startLanguages
{%- for lang in languages %}
{{ lang.language }} {{ lang.level }}\crlf
{%- if loop.index0 == loop.length // 2 - 1 %}\Languages{% endif -%}
{% endfor %}
\stopLanguages
\stopSubSection
\stopSection
\stoptext
