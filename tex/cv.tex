%% language
\mainlanguage[en]

%% FontAwesome symbols
\definefontsynonym[Awesome][name:fontawesome]
\definesymbol[AwItem][\getnamedglyphdirect{Awesome}{ok}]
\define\AwItem{\symbol[AwItem]}
\definesymbol[AwProfile][\getnamedglyphdirect{Awesome}{user}]
\define\AwProfile{\symbol[AwProfile]}
\definesymbol[AwMobile][\getnamedglyphdirect{Awesome}{mobile_phone}]
\define\AwMobile{\symbol[AwMobile]}
\definesymbol[AwPhone][\getnamedglyphdirect{Awesome}{phone}]
\define\AwPhone{\symbol[AwPhone]}
\definesymbol[AwEmail][\getnamedglyphdirect{Awesome}{envelope}]
\define\AwEmail{\symbol[AwEmail]}
\definesymbol[AwLocation][\getnamedglyphdirect{Awesome}{map_marker}]
\define\AwLocation{\symbol[AwLocation]}
\definesymbol[AwObjective][\getnamedglyphdirect{Awesome}{star}]
\define\AwObjective{\symbol[AwObjective]}
\definesymbol[AwEducation][\getnamedglyphdirect{Awesome}{_388}]
\define\AwEducation{\symbol[AwEducation]}
\definesymbol[AwEmployment][\getnamedglyphdirect{Awesome}{cogs}]
\define\AwEmployment{\symbol[AwEmployment]}
\definesymbol[AwExperience][\getnamedglyphdirect{Awesome}{cog}]
\define\AwExperience{\symbol[AwExperience]}
\definesymbol[AwProficiency][\getnamedglyphdirect{Awesome}{wrench}]
\define\AwProficiency{\symbol[AwProficiency]}
\definesymbol[AwLanguages][\getnamedglyphdirect{Awesome}{globe}]
\define\AwLanguages{\symbol[AwLanguages]}

%% SourcePro font
\starttypescript[sans][SourcePro]
\definefontsynonym[Sans][name:sourcesansprolight]
\definefontsynonym[SansBold][name:sourcesansprobold]
\definefontsynonym[SansItalic][name:sourcesansprolightit]
\stoptypescript
\definetypeface[SourcePro][ss][sans][SourcePro]
\setupbodyfont[SourcePro,sans,10pt]

%% layout
\setuplayout[backspace=5pt,edge=0pt,edgedistance=0pt,margin=0pt,
  margindistance=5pt,width=fit,
  topspace=0pt,top=0pt,topdistance=0pt,header=1pt,headerdistance=25pt,
  footer=20pt,footerdistance=5pt,bottom=1pt,bottomdistance=10pt,height=fit]
%\showframe
\setupwhitespace[small]
\definehspace[20pt][20pt]
\definehspace[30pt][30pt]
\setuppagenumbering[location=]
\setupfootertexts[{\tfx
  \hspace[30pt]{\darkgray\AwMobile}\hspace[medium]{{ mobile }}
  \hfill{\darkgray\AwEmail}\hspace[medium]{{ email }}
  \hfill{\darkgray\AwLocation}\hspace[medium]{{ address }}\hspace[20pt]}]

%% lists
\definesymbol[1][{\darkgray\AwItem}]

%% interaction
\setupinteraction[state=start]
\useURL[url:context][http://contextgarden.net][][\CONTEXT]

%% Background
\definelayer[Background][state=repeat,x=0pt,y=0pt,width=\paperwidth,
  height=\paperheight]
\setupbackgrounds[page][background={color,Background},
  backgroundcolor=lightgray]

%% Section
\defineparagraphs[Section][n=2,distance=20pt]
\setupparagraphs[Section][1][width=0.05\textwidth]

%% SubSection
\defineparagraphs[SubSection][n=2,distance=20pt]
\setupparagraphs[SubSection][1][width=0.2\textwidth,align=flushright]

%% Profile
\defineparagraphs[Profile][n=2,distance=10pt]
\setupparagraphs[Profile][1][width=0.4\textwidth]

%% Domains
\defineparagraphs[Domains][n=2,distance=10pt]
\setupparagraphs[Domains][1][width=0.35\textwidth]

%% Frameworks
\defineparagraphs[Frameworks][n=2,distance=10pt]
\setupparagraphs[Frameworks][1][width=0.17\textwidth]

%% Languages
\defineparagraphs[Languages][n=2,distance=20pt]
\setupparagraphs[Languages][1][width=0.3\textwidth]

%\usemodule[fnt-10]
%\ShowCompleteFont{name:fontawesome}{20pt}{1}

\starttext

%% BACKGROUND %%
\setlayer[Background][preset=lefttop]
  {\framed[width=30pt,height=\paperheight,frame=off,
    background=color,backgroundcolor=cyan]{}}
\setlayer[Background][preset=lefttop]
  {\framed[width=\paperwidth,align=left,frame=off,
    background=color,backgroundcolor=blue,
    foreground=color,foregroundcolor=white]
    {\bfx CURRICULUM VITAE\hspace[big]}}
\setlayer[Background][preset=leftbottom]
  {\framed[width=\paperwidth,height=8px,frame=off,
    background=color,backgroundcolor=blue]{}}
\setlayer[Background][preset=rightbottom,y=14pt]
  {\rotate[90]{\framed[frame=off]{\tfxx Typeset with \CONTEXT}}}

%% PROFILE %%
\startSection
{\tfd\darkgray\AwProfile}\crlf\Section

\startProfile
{{ firstName }} {{ lastName }}\blank
{{ position }}\Profile
{\darkgray\AwMobile}\hspace[big]{{ mobile }}
{%- if home %}
\hspace[30pt]{\darkgray\AwPhone}\hspace[big]{{ home }}
{%- endif %}\crlf
{\darkgray\AwEmail}\hspace[medium]{{ email }}\crlf
{\darkgray\AwLocation}\hspace[big]{{ address }}
\stopProfile
\stopSection

%% OBJECTIVE %%
\startSection
{\tfd\darkgray\AwObjective}\crlf\Section

\startSubSection
{\bfc\darkgray Objective}\SubSection
{{ objective }}
\stopSubSection
\stopSection

%% EDUCATION %%
\startSection
{\tfd\darkgray\AwEducation}\crlf
\rotate[90]{\bfd\darkgray Education}\Section

\startSubSection
{\bfc\darkgray Education}\SubSection
\stopSubSection
{% for edu in education %}
\startSubSection
{{ edu.from }} -- {{ edu.to }}\SubSection
{{ edu.degree }}\crlf
{{ edu.school.name}}, {{ edu.school.location }}\crlf
{{ edu.subject }}\crlf
{{ edu.description }}
\stopSubSection
{% endfor -%}
\stopSection

%% EMPLOYMENT %%
\startSection
{\tfd\darkgray\AwEmployment}\crlf
\rotate[90]{\bfd\darkgray Employment}\Section

\startSubSection
{\bfc\darkgray Employment}\SubSection
\stopSubSection
{% for emp in employment %}
\startSubSection
{{ emp.from }} -- {{ emp.to }}\SubSection
{{ emp.position }}\crlf
{{ emp.company.name }}, {{ emp.company.location }}\crlf
{{ emp.department }}
  \startitemize[joinedup,nowhite]
  {% for resp in emp.responsibilities -%}
  \item {{ resp }}
  {% endfor -%}
  \stopitemize
\stopSubSection
{% endfor -%}
\stopSection

%% EXPERIENCE %%
\startSection
{\tfd\darkgray\AwExperience}\crlf
\rotate[90]{\bfd\darkgray Experience}\Section

\startSubSection
{\bfc\darkgray Experience}\SubSection
\stopSubSection
{% for exp in experience %}
\startSubSection
{{ exp.domain }}\SubSection
{{ exp.description.before }}
{%- if exp.description.experiences.length %}
  \startitemize[joinedup,nowhite]
  {% for ex in exp.description.experiences -%}
  \item {{ ex }}
  {% endfor -%}
  \stopitemize
{%- endif %}
{{ exp.description.after }}
\stopSubSection
{% endfor -%}
\stopSection

%% PROFICIENCY %%
{% if proficiency -%}
\startSection
{\tfd\darkgray\AwProficiency}\crlf
\rotate[90]{\bfd\darkgray Technical Proficiency}\Section

\startSubSection
{\bfc\darkgray Technical Proficiency}\SubSection
\stopSubSection
{% for prof in proficiency %}
\startSubSection
{{ prof.domain }}\SubSection
\startDomains
{%- for subdom in prof.subdomains %}
{{ subdom.subdomain }}
\startFrameworks
{%- for framework in subdom.frameworks %}
{{ framework.name }}\crlf
{%- if loop.index0 == loop.length // 2 - 1 %}\Frameworks{% endif -%}
{% endfor %}
\stopFrameworks
{%- if loop.index0 == loop.length // 2 - 1 %}\Domains{% endif -%}
{% endfor %}
\stopDomains
\stopSubSection
{% endfor -%}
\stopSection
{%- endif %}

%% LANGUAGES %%
\startSection
{\tfd\darkgray\AwLanguages}\crlf
\rotate[90]{\bfd\darkgray Languages}\Section

\startSubSection
{\bfc\darkgray Languages}\SubSection

\startLanguages
{%- for lang in languages %}
{{ lang.language }} {{ lang.level }}\crlf
{%- if loop.index0 == loop.length // 2 - 1 %}\Languages{% endif -%}
{% endfor %}
\stopLanguages
\stopSubSection
\stopSection
\stoptext
