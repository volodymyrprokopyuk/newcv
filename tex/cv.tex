%% language
\mainlanguage[{{ meta.locale }}]

%% colors
\setupcolor[hex]
\definecolor[Base][h=184be5]
\definecolor[Lighter][h=7c9af7]
\definecolor[Light][h=4670ef]
\definecolor[Dark][h=0a33ab]
\definecolor[Darker][h=09216a]

%% FontAwesome symbols
\definefontsynonym[Awesome][name:fontawesome]
\definesymbol[AwItem][\getnamedglyphdirect{Awesome}{ok}]
\define\AwItem{\symbol[AwItem]}
\definesymbol[AwProfile][\getnamedglyphdirect{Awesome}{user}]
\define\AwProfile{\symbol[AwProfile]}
\definesymbol[AwMobile][\getnamedglyphdirect{Awesome}{mobile_phone}]
\define\AwMobile{\symbol[AwMobile]}
\definesymbol[AwPhone][\getnamedglyphdirect{Awesome}{phone}]
\define\AwPhone{\symbol[AwPhone]}
\definesymbol[AwEmail][\getnamedglyphdirect{Awesome}{envelope}]
\define\AwEmail{\symbol[AwEmail]}
\definesymbol[AwLocation][\getnamedglyphdirect{Awesome}{map_marker}]
\define\AwLocation{\symbol[AwLocation]}
\definesymbol[AwObjective][\getnamedglyphdirect{Awesome}{star}]
\define\AwObjective{\symbol[AwObjective]}
\definesymbol[AwEducation][\getnamedglyphdirect{Awesome}{_388}]
\define\AwEducation{\symbol[AwEducation]}
\definesymbol[AwEmployment][\getnamedglyphdirect{Awesome}{cogs}]
\define\AwEmployment{\symbol[AwEmployment]}
\definesymbol[AwExperience][\getnamedglyphdirect{Awesome}{cog}]
\define\AwExperience{\symbol[AwExperience]}
\definesymbol[AwProficiency][\getnamedglyphdirect{Awesome}{wrench}]
\define\AwProficiency{\symbol[AwProficiency]}
\definesymbol[AwLanguages][\getnamedglyphdirect{Awesome}{globe}]
\define\AwLanguages{\symbol[AwLanguages]}

%% SourcePro font
\starttypescript[sans][SourcePro]
\definefontsynonym[Sans][name:sourcesansprolight]
\definefontsynonym[SansBold][name:sourcesansprobold]
\definefontsynonym[SansItalic][name:sourcesansprolightit]
\definefontsynonym[SansBoldItalic][name:sourcesansprosemiboldit]
\stoptypescript
\definetypeface[SourcePro][ss][sans][SourcePro]
\setupbodyfont[SourcePro,sans,10pt]

%% layout
\setuplayout[backspace=5pt,edge=0pt,edgedistance=0pt,margin=1pt,
  leftmargindistance=5pt,rightmargindistance=10pt,width=fit,
  topspace=0pt,top=0pt,topdistance=0pt,header=1pt,headerdistance=22pt,
  footer=16pt,footerdistance=5pt,bottom=1pt,bottomdistance=8pt,height=fit]
%\showframe
\setupwhitespace[small]
\definehspace[1pt][1pt]
\definehspace[20pt][20pt]
\definehspace[30pt][30pt]
\definehspace[40pt][40pt]

%% header/footer
\setuppagenumbering[location=]
\setupfootertexts[{\tfx\Dark
  \hspace[40pt]{\Lighter\AwMobile}\hspace[medium]{{ mobile }}
  \hfill{\Lighter\AwEmail}\hspace[medium]{{ email }}
  \hfill{\Lighter\AwLocation}\hspace[medium]{{ address }}\hspace[20pt]}]

%% lists
\definesymbol[1][{\Lighter\AwItem}]

%% interaction
\setupinteraction[state=start,color=Base,style={\bi}]
{{ urls.join('\n') }}

%% Background
\definelayer[Background][state=repeat,x=0pt,y=0pt,width=\paperwidth,
  height=\paperheight]
\setupbackgrounds[page][background={color,Background},
  backgroundcolor=white]

%% Section
\defineparagraphs[Section][n=2,distance=5pt]
\setupparagraphs[Section][1][width=0.05\textwidth]

%% SubSection
\defineparagraphs[SubSection][n=2,distance=14pt]
\setupparagraphs[SubSection][1][width=0.2\textwidth,align=flushright]

%% Profile
\defineparagraphs[Profile][n=3,distance=10pt]
\setupparagraphs[Profile][1][width=0.05\textwidth]
\setupparagraphs[Profile][2][width=0.45\textwidth]

%% Domains
\defineparagraphs[Domains][n=2,distance=10pt]
\setupparagraphs[Domains][1][width=0.34\textwidth]

%% Frameworks
\defineparagraphs[Frameworks][n=2,distance=10pt]
\setupparagraphs[Frameworks][1][width=0.15\textwidth]

%% Languages
\defineparagraphs[Languages][n=2,distance=10pt]
\setupparagraphs[Languages][1][width=0.34\textwidth]

%\usemodule[fnt-10]
%\ShowCompleteFont{name:fontawesome}{20pt}{1}

\starttext

%% BACKGROUND %%
\setlayer[Background][preset=lefttop]
  {\framed[width=30pt,height=\paperheight,frame=off,
    background=color,backgroundcolor=Lighter]{}}
\setlayer[Background][preset=lefttop]
  {\framed[width=\paperwidth,align=left,frame=off,
    background=color,backgroundcolor=Base,
    foreground=color,foregroundcolor=white]
    {\bfx CURRICULUM VITAE\hspace[big]}}
\setlayer[Background][preset=leftbottom]
  {\framed[width=\paperwidth,height=8px,frame=off,
    background=color,backgroundcolor=Base]{}}
\setlayer[Background][preset=rightbottom,y=12pt]
  {\rotate[90]{\framed[frame=off]{\tfxx\Dark {{ locale.typesetWith }} \CONTEXT}}}

%% PROFILE %%
\startSection
{\tfd\Light\AwProfile}\crlf\Section

\startProfile
\Profile
{\bfc\Dark {{ firstName }} {{ lastName }} }\blank
{\tfa\Base {{ position }} }\Profile
\startcolor[Base]
{\Lighter\AwMobile}\hspace[big]{{ mobile }}
{%- if home %}
\hspace[30pt]{\Lighter\AwPhone}\hspace[big]{{ home }}
{%- endif %}\crlf
{\Lighter\AwEmail}\hspace[medium]{{ email }}\crlf
{\Lighter\AwLocation}\hspace[big]{{ address }}
\stopcolor
\stopProfile
\stopSection

%% OBJECTIVE %%
\startSection
{\tfd\Light\AwObjective}\crlf\Section

\startSubSection
{\bfc\Lighter\unhyphenated{ {{ locale.objective }} }}\SubSection
{{ objective }}
\stopSubSection
\stopSection

%% EDUCATION %%
\startSection
{\tfc\Light\AwEducation}\crlf
\rotate[90]{\bfd\Light {{ locale.education }}\hspace[1pt]}\Section

\startSubSection
{\bfc\Lighter\unhyphenated{ {{ locale.education }} }}\SubSection
\stopSubSection
{% for edu in education %}
\startSubSection
{\bi\Light {{ edu.from }} \endash\ {{ edu.to }} }\SubSection
{\bfa\Dark {{ edu.degree }} }\crlf
{\bi {{ edu.school }} }\crlf
{\it {{ edu.subject }} }\crlf
{{ edu.description }}
\stopSubSection
{% endfor -%}
\stopSection

%% EMPLOYMENT %%
\startSection
{\tfc\Light\AwEmployment}\crlf
\rotate[90]{\bfd\Light {{ locale.employment }}\hspace[small]}\Section

\startSubSection
{\bfc\Lighter\unhyphenated{ {{ locale.employment }} }}\SubSection
\stopSubSection
{% for emp in employment %}
\startSubSection
{\bi\Light {{ emp.from }} \endash\ {{ emp.to }} }\SubSection
{\bfa\Dark {{ emp.position }} }\crlf
{\bi {{ emp.company }} }\crlf
{\it {{ emp.department }} }
  \startitemize[joinedup,nowhite]
  {% for resp in emp.responsibilities -%}
  \item {{ resp }}
  {% endfor -%}
  \stopitemize
\stopSubSection
{% endfor -%}
\stopSection

%% EXPERIENCE %%
\startSection
{\tfd\Light\AwExperience}\crlf
\rotate[90]{\bfd\Light {{ locale.experience }}\hspace[small]}\Section

\startSubSection
{\bfc\Lighter\unhyphenated{ {{ locale.experience }} }}\SubSection
\stopSubSection
{% for exp in experience %}
\startSubSection
{\bi\Light {{ exp.domain }} }\SubSection
{{ exp.description.before }}
{%- if exp.description.experiences.length %}
  \startitemize[joinedup,nowhite]
  {% for ex in exp.description.experiences -%}
  \item {{ ex }}
  {% endfor -%}
  \stopitemize
{%- endif %}
{{ exp.description.after }}
\stopSubSection
{% endfor -%}
\stopSection

%% PROFICIENCY %%
{% if proficiency -%}
\startSection
{\tfd\Light\AwProficiency}\crlf
\rotate[90]{\bfd\Light {{ locale.proficiency }}\hspace[small]}\Section

\startSubSection
{\bfc\Lighter\unhyphenated{ {{ locale.proficiency }} }}\SubSection
\stopSubSection
{% for prof in proficiency %}
\startSubSection
{\bi\Light {{ prof.domain }} }\SubSection
\startDomains
{%- for subdom in prof.subdomains %}
{\bf\Dark {{ subdom.subdomain }} }
\startFrameworks
{%- for framework in subdom.frameworks %}
{\bi {{ framework }} }\crlf
{%- if loop.index0 == loop.length // 2 - 1 %}\Frameworks{% endif -%}
{% endfor %}
\stopFrameworks
{%- if loop.index0 == loop.length // 2 - 1 %}\Domains{% endif -%}
{% endfor %}
\stopDomains
\stopSubSection
{% endfor -%}
\stopSection
{%- endif %}

%% LANGUAGES %%
\startSection
{\tfd\Light\AwLanguages}\crlf
\rotate[90]{\bfd\Light {{ locale.languages }}\hspace[small]}\Section

\startSubSection
{\bfc\Lighter\unhyphenated{ {{ locale.languages }} }}\SubSection

\startLanguages
{%- for lang in languages %}
{\bf\Dark {{ lang.language }} } {{ lang.level }}\crlf
{%- if loop.index0 == loop.length // 2 - 1 %}\Languages{% endif -%}
{% endfor %}
\stopLanguages
\stopSubSection
\stopSection
\stoptext
